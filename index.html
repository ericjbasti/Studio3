<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Studio.js v3 by ericjbasti</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
    <script src="studio-compiled.js"></script>
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Studio.js v3</h1>
      <h2 class="project-tagline">Canvas (and WebGL?) animation engine.</h2>
      <a href="https://github.com/ericjbasti/Studio3" class="btn">View on GitHub</a>
      <a href="https://github.com/ericjbasti/Studio3/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/ericjbasti/Studio3/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <canvas id="stage" width="800" height="600" style="display: block; margin: 0 auto;"></canvas>

    </section>

    <script>
    var stage = new Studio.Stage('stage',{webgl:0, dur:1000/60, fullscreen:0, resolution: 1})
stage.color.setFromHex("#333")
var butter_sheet = new Studio.Image('assets/butterfly.png');

var BlueMorpho = function(attr){
  this.image = butter_sheet;
  this.width = 22;
  this.height = 85;
  this.y = 200
  this.rect = {x:250, y:0, height: 85, width: 22};
  this.scaleY = this.scaleX = .5 + (Math.random()*.15)
  if(attr){
    this.apply(attr);
  }
  this.leftWing = new Studio.ImageSlice({rect:{x:0, y:0, height: 194, width: 122}, image: butter_sheet, anchorX: 1, height: 194, width: 122, x: -5, y: -15});
  this.rightWing = new Studio.ImageSlice({rect:{x:122, y:0, height: 194, width: 122}, image: butter_sheet, anchorX: 0, height: 194, width: 122, x:5, y: -15});
  this.addChild(this.leftWing)
  this.addChild(this.rightWing)
  this.init();
}
Studio.extend(BlueMorpho, Studio.ImageSlice)

BlueMorpho.prototype.init = function(){
  this.count = Math.random()*22;
  this.speed = .7+ Math.random()
}

BlueMorpho.prototype.boundsCheck = function(){
  if(this.x< -100){
    this.x = stage.width+100;
    this.rotation = 0;
  }
  if(this.y< -100){
    this.y = stage.height+100;
    this.speed = .7+ Math.random()
    this.rotation = 0;
  }
}
BlueMorpho.prototype.onEnterFrame = function(){
  var a = Math.cos(this.count);
  this.leftWing.scaleX = .66 - (a * .65);
  this.rightWing.scaleX = .66 - (a * .65);
  this.leftWing.scaleY = 1 + (a * .1);
  this.rightWing.scaleY = 1 + (a * .1);
  this.count+= .3 * this._world.speed;
  this.rotation += a;
  this.x += .5 -Math.random() * 2 * this._world.speed;
  this.y += .5 -Math.random() * 2 * this._world.speed;
  
  this.boundsCheck();
}

var Monarch = function(attr){
  this.image = butter_sheet;
  this.width = 18;
  this.height = 66;
  this.y = 200
  this.rect = {x:250, y:0, height: 85, width: 22};
  this.scaleY = this.scaleX = .4 + (Math.random()*.15)
  if(attr){
    this.apply(attr);
  }
  this.leftWing = new Studio.ImageSlice({rect:{x:246, y:96, height: 159, width: 114}, image: butter_sheet, anchorX: 1, height: 194, width: 122, x: -3, y: -15});
  this.rightWing = new Studio.ImageSlice({rect:{x:246+114, y:96, height: 159, width: 114}, image: butter_sheet, anchorX: 0, height: 194, width: 122, x:3, y: -15});
  this.addChild(this.leftWing)
  this.addChild(this.rightWing)
  this.init();
}

Studio.extend(Monarch, Studio.ImageSlice)

Monarch.prototype.init = function(){
  this.count = Math.random()*22;
  this.speed = .7+ Math.random()
}

Monarch.prototype.boundsCheck = function(){
  if(this.x< -100){
    this.x = stage.width+100;
    this.rotation = 0;
  }
  if(this.y< -100){
    this.y = stage.height+100;
    this.speed = .7+ Math.random()
    this.rotation = 0;
  }
}
Monarch.prototype.onEnterFrame = function(){
  var a = Math.cos(this.count);
  this.leftWing.scaleX = .66 - (a * .65);
  this.rightWing.scaleX = .66 - (a * .65);
  this.leftWing.scaleY = 1 + (a * .1);
  this.rightWing.scaleY = 1 + (a * .1);
  this.count+= .3 * this._world.speed;
  this.rotation += a;
  this.x += .5 -Math.random() * 2 * this._world.speed;
  this.y += .5 -Math.random() * 2 * this._world.speed;
  
  this.boundsCheck();
}

for (var i = 0; i != 15 ; i++){
  var a = new BlueMorpho({x: Math.random() * stage.width, y: Math.random() * stage.height});
  stage.addChild(a);
  // stage.addChild(b);
}
for (var i = 0; i != 25 ; i++){
  var b = new Monarch({x: Math.random() * stage.width, y: Math.random() * stage.height});
  stage.addChild(b);
}

Studio.start();

    </script>
  </body>
</html>
